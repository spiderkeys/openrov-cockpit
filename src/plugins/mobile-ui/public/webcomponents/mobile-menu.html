<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../iron-icons/iron-icons.html">
<link rel="import" href="../iron-icons/image-icons.html">
<link rel="import" href="../iron-icon/iron-icon.html">

<link rel="import" href="mobile-compass.html">

<dom-module id="mobile-menu">
	
	<style type="text/css">
		:host 
		{
			display: block;
			position: relative;
			padding-top: 3px;
			padding-left: 3px;
			padding-right: 3px;
			width: 100%;
		}
		
		#container
		{
			height: 45px;
		}
		
		#menu
		{
			float: left;
			fill: white;
			stroke: black;
			border: 2px solid white;
			border-radius: 3px;
			width: 30px;
			height: 30px;
		}
		
		#compass
		{
			float: left;
			width: 42px;
			height: 42px;
			margin-left:10px;
		}
		
		#voltage
		{
			float: right;
			border:none;
			background: rgba(0,0,0,0.4);
			border-radius: 25%;
			width: 50px;
			height: 34px;
			margin-right: 5px;
			color:white;
			text-align: center;
		    display: flex;
		    justify-content: center; /* align horizontal */
		    align-items: center; /* align vertical */
		}
		
		#depth
		{
			float: right;
			border:none;
			background: rgba(0,0,0,0.4);
			border-radius: 25%;
			width: 50px;
			height: 34px;
			color:white;
			text-align: center;
		    display: flex;
		    justify-content: center; /* align horizontal */
		    align-items: center; /* align vertical */
		}
		
	</style>

	<template>
		<div id="container">
			<iron-icon id="menu" icon="image:dehaze" on-tap="_onTapMenu"></iron-icon>
			<mobile-compass id="compass" event-emitter="{{eventEmitter}}"></mobile-compass>

			<div id="depth">{{depth}}m</div>
			<div id="voltage">{{battery}}V</div>

			<!-- Voltage -->
			<!-- Depth -->
		</div>
		
	</template>
	
	<script>
		( function()
		{
			Polymer(
			{
				is: 'mobile-menu',
				
				properties: 
				{
					depth: 
					{
						type: Number,
						value: 0
					},
					
					battery: 
					{
						type: Number,
						value: 0
					}
				},
				
				behaviors: [namespace('behaviors').oROVStandard],
				
				registerEmitterHanlders: function(emitter)
				{
					var self = this;
					emitter.on('plugin.navigationData.data',function(data)
					{
						if ('depth' in data) 
						{
							self.set('depth',Number(data.depth).toFixed(2) );
						}
					});
					
					emitter.on('plugin.controllerboard2x.systemPower.update',function(data)
					{
						if ('voltage' in data.board) 
						{
							self.set('battery',Number(data.board.voltage) );
						}
					});
				
					
				},
				
				_onTapMenu: function()
				{
					console.log( "tapped!" );
				}
				
			} );
		}() );
		
	</script>
</dom-module>
